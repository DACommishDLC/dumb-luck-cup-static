<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Dumb Luck Cup â€” Leaderboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold:    #f5c518;
      --silver:  #c0c0c0;
      --bronze:  #cd7f32;
      --green:   #00c48c;
      --red:     #ff4d4d;
      --dark:    #0d0f14;
      --card:    #171a22;
      --border:  #252836;
      --text:    #e8eaf0;
      --muted:   #6b7280;
      --accent:  #667eea;
    }

    * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--dark);
      color: var(--text);
      min-height: 100vh;
      padding-bottom: 40px;
    }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      background: linear-gradient(135deg, #f5c518 0%, #d4a017 100%);
      padding: 32px 20px 28px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: 'ğŸ†';
      position: absolute;
      font-size: 200px;
      opacity: 0.1;
      top: -30px;
      right: -30px;
      transform: rotate(15deg);
      pointer-events: none;
    }

    .trophy-icon {
      font-size: 56px;
      margin-bottom: 8px;
      filter: drop-shadow(0 4px 20px rgba(245,197,24,0.4));
      position: relative;
      z-index: 1;
    }

    h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 42px;
      letter-spacing: 2px;
      margin-bottom: 4px;
      position: relative;
      z-index: 1;
      color: #000;
    }

    .season-info {
      font-size: 14px;
      opacity: 0.9;
      position: relative;
      z-index: 1;
      color: rgba(0,0,0,0.7);
      font-weight: 600;
    }

    .season-info span {
      display: inline-block;
      padding: 0 8px;
    }

    /* â”€â”€ Stats bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .stats-bar {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1px;
      background: var(--border);
      border-bottom: 1px solid var(--border);
    }

    .stat-box {
      background: var(--card);
      padding: 14px 12px;
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 800;
      color: var(--gold);
      display: block;
      margin-bottom: 2px;
    }

    .stat-label {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* â”€â”€ Podium â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .podium-container {
      padding: 28px 20px;
      background: var(--card);
    }

    .podium {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
      max-width: 500px;
      margin: 0 auto;
      align-items: flex-end;
    }

    .podium-place {
      text-align: center;
    }

    .podium-place.second { grid-column: 1; }
    .podium-place.first  { grid-column: 2; }
    .podium-place.third  { grid-column: 3; }

    .podium-medal {
      font-size: 48px;
      display: block;
      margin-bottom: 8px;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,0.3));
    }

    .podium-place.first .podium-medal   { font-size: 64px; }
    .podium-place.second .podium-medal  { font-size: 52px; }

    .podium-name {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .podium-place.first .podium-name { font-size: 20px; }

    .podium-points {
      font-size: 28px;
      font-weight: 800;
      color: var(--gold);
    }

    .podium-place.first .podium-points { font-size: 36px; }

    .podium-label {
      font-size: 10px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* â”€â”€ Full standings table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .standings-section {
      padding: 20px 12px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 8px 12px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 700;
    }

    .refresh-btn {
      background: var(--border);
      border: none;
      border-radius: 20px;
      padding: 6px 14px;
      font-family: 'DM Sans', sans-serif;
      font-size: 12px;
      font-weight: 600;
      color: var(--text);
      cursor: pointer;
      transition: all 0.2s;
    }

    .refresh-btn:hover {
      background: var(--muted);
      transform: scale(1.04);
    }

    .standings-table-wrap {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--card);
    }

    .standings-table {
      width: 100%;
      border-collapse: collapse;
    }

    .standings-table thead {
      background: rgba(102,126,234,0.1);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .standings-table th {
      padding: 10px 8px;
      text-align: left;
      font-size: 11px;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border-bottom: 1px solid var(--border);
    }

    .standings-table th.rank-col { width: 50px; text-align: center; }
    .standings-table th.total-col { 
      background: rgba(245,197,24,0.15);
      color: var(--gold);
      text-align: center;
      font-size: 12px;
    }

    .standings-table td {
      padding: 12px 8px;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
    }

    .standings-table tbody tr:hover {
      background: rgba(255,255,255,0.02);
    }

    .rank-cell {
      text-align: center;
      font-weight: 700;
      font-size: 18px;
      color: var(--muted);
    }

    .rank-cell.rank-1 { color: var(--gold);   font-size: 24px; }
    .rank-cell.rank-2 { color: var(--silver); font-size: 22px; }
    .rank-cell.rank-3 { color: var(--bronze); font-size: 20px; }

    .player-cell {
      font-weight: 700;
      font-size: 16px;
    }

    .week-cell {
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
    }

    .week-cell.has-score {
      color: var(--text);
    }

    .week-cell.best-week {
      color: var(--green);
      font-weight: 800;
    }

    .week-cell.worst-week {
      color: var(--red);
      opacity: 0.6;
    }

    .total-cell {
      text-align: center;
      font-size: 22px;
      font-weight: 800;
      color: var(--gold);
      background: rgba(245,197,24,0.08);
    }

    /* â”€â”€ Empty state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }

    .empty-state .emoji {
      font-size: 64px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    .empty-state h3 {
      font-size: 20px;
      margin-bottom: 8px;
      color: var(--text);
    }

    .empty-state p {
      font-size: 14px;
      line-height: 1.6;
    }

    /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer {
      text-align: center;
      padding: 32px 20px;
      color: var(--muted);
      font-size: 13px;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (min-width: 768px) {
      .standings-section,
      .podium-container {
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
      }
    }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js">
  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js">
  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
  <script src="firebase-config.js">
  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
</head>
<body>

<!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header>
  <div class="trophy-icon">ğŸ†</div>
  <h1>Dumb Luck Cup</h1>
  <div class="season-info">
    <span>2025 Season</span>
    <span>Â·</span>
    <span id="currentWeek">Week â€”</span>
  </div>
</header>

<!-- â”€â”€ Stats bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="stats-bar">
  <div class="stat-box">
    <span class="stat-value" id="totalPlayers">0</span>
    <span class="stat-label">Players</span>
  </div>
  <div class="stat-box">
    <span class="stat-value" id="totalGames">0</span>
    <span class="stat-label">Games Scored</span>
  </div>
  <div class="stat-box">
    <span class="stat-value" id="avgScore">â€”</span>
    <span class="stat-label">Avg Score</span>
  </div>
</div>

<!-- â”€â”€ Podium â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="podium-container" id="podiumContainer">
  <div class="podium" id="podium">
    <!-- Populated by JS -->
  </div>
</div>

<!-- â”€â”€ Full standings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="standings-section">
  <div class="section-header">
    <h2 class="section-title">Season Standings</h2>
    <button class="refresh-btn" onclick="loadStandings()">ğŸ”„ Refresh</button>
  </div>
  
  <div class="standings-table-wrap">
    <table class="standings-table">
      <thead id="standingsTableHead">
        <!-- Populated by JS -->
      </thead>
      <tbody id="standingsTableBody">
        <!-- Populated by JS -->
      </tbody>
    </table>
  </div>
</div>

<!-- â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer>
  <p>
    <a href="dlc-picks.html">ğŸ“ Make Your Picks</a>
    &nbsp;Â·&nbsp;
    Commissioner: <a href="dlc-admin-panel.html">Admin Panel</a>
  </p>
  <p style="margin-top:12px; font-size:11px; opacity:0.6;">
    Cover the spread = 2 pts Â· Push = 1 pt Â· No cover = 0 pts
  </p>
</footer>

<script>
  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let games = [];
  let playerData = {};
  let weeks = [];

  // â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.addEventListener('DOMContentLoaded', async () => {
    await loadStandings();
    // Set up real-time listeners for live updates
    if (typeof DLC_DB !== 'undefined') {
      DLC_DB.onGamesChange((newGames) => {
        games = newGames;
        calculateStandings();
        renderStats();
        renderPodium();
        renderStandingsTable();
      });
      
      DLC_DB.onAllPicksChange((newPicks) => {
        playerData = newPicks;
        calculateStandings();
        renderStats();
        renderPodium();
        renderStandingsTable();
      });
    }
  });

  async function loadStandings() {
    // Load games from Firebase
    try {
      games = await DLC_DB.loadGames();
    } catch(e) {
      console.warn('Firebase load failed, trying localStorage');
      const stored = localStorage.getItem('dlc_games');
      if (stored) {
        try { games = JSON.parse(stored); } catch(e) { games = []; }
      }
    }

    // Load all player picks from Firebase
    try {
      playerData = await DLC_DB.loadAllPlayerPicks();
    } catch(e) {
      console.warn('Firebase picks load failed, trying localStorage');
      playerData = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('dlc_picks_')) {
          const playerName = key.replace('dlc_picks_', '');
          try {
            playerData[playerName] = JSON.parse(localStorage.getItem(key));
          } catch(e) {}
        }
      }
    }

    // Determine which weeks have scored games
    const scoredGames = games.filter(g => g.homeScore !== null && g.finalSpread !== null);
    weeks = [...new Set(scoredGames.map(g => g.week))].sort((a,b) => a - b);

    calculateStandings();
    renderStats();
    renderPodium();
    renderStandingsTable();
  }

  function calculateStandings() {
    const scoredGames = games.filter(g => g.homeScore !== null && g.finalSpread !== null);
    
    const standings = Object.entries(playerData).map(([player, picks]) => {
      const weeklyScores = {};
      let totalPoints = 0;

      Object.entries(picks).forEach(([gameId, pick]) => {
        const game = scoredGames.find(g => g.id === gameId);
        if (!game) return;

        const { points } = scorePickResult(
          game.homeScore, game.awayScore, game.finalSpread, pick.side
        );

        const week = game.week;
        if (!weeklyScores[week]) weeklyScores[week] = 0;
        weeklyScores[week] += points;
        totalPoints += points;
      });

      return { player, weeklyScores, totalPoints };
    })
    .filter(s => s.totalPoints > 0)
    .sort((a, b) => b.totalPoints - a.totalPoints);

    return standings;
  }

  function scorePickResult(homeScore, awayScore, lockedSpread, pickedSide) {
    const homeMargin = homeScore - awayScore;
    const coverMargin = homeMargin + lockedSpread;
    const homeFavored = lockedSpread < 0;

    if (pickedSide === 'favorite') {
      if (homeFavored) {
        if (coverMargin > 0)  return { result: 'WIN',  points: 2 };
        if (coverMargin === 0) return { result: 'PUSH', points: 1 };
        return { result: 'LOSS', points: 0 };
      } else {
        const awayMargin = awayScore - homeScore;
        const awayCover = awayMargin - Math.abs(lockedSpread);
        if (awayCover > 0)  return { result: 'WIN',  points: 2 };
        if (awayCover === 0) return { result: 'PUSH', points: 1 };
        return { result: 'LOSS', points: 0 };
      }
    } else {
      if (homeFavored) {
        if (coverMargin < 0)  return { result: 'WIN',  points: 2 };
        if (coverMargin === 0) return { result: 'PUSH', points: 1 };
        return { result: 'LOSS', points: 0 };
      } else {
        if (coverMargin > 0)  return { result: 'WIN',  points: 2 };
        if (coverMargin === 0) return { result: 'PUSH', points: 1 };
        return { result: 'LOSS', points: 0 };
      }
    }
  }

  function renderStats() {
    const standings = calculateStandings();
    const scoredGames = games.filter(g => g.homeScore !== null).length;
    
    document.getElementById('totalPlayers').textContent = standings.length;
    document.getElementById('totalGames').textContent = scoredGames;
    
    if (standings.length > 0) {
      const avg = standings.reduce((sum, s) => sum + s.totalPoints, 0) / standings.length;
      document.getElementById('avgScore').textContent = avg.toFixed(1);
    }

    const maxWeek = Math.max(...weeks, 0);
    document.getElementById('currentWeek').textContent = maxWeek > 0 ? `Week ${maxWeek}` : 'Pre-Season';
  }

  function renderPodium() {
    const standings = calculateStandings();
    const podium = document.getElementById('podium');

    if (standings.length === 0) {
      document.getElementById('podiumContainer').style.display = 'none';
      return;
    }

    document.getElementById('podiumContainer').style.display = 'block';

    const top3 = standings.slice(0, 3);
    const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
    const classes = ['first', 'second', 'third'];

    podium.innerHTML = top3.map((s, idx) => `
      <div class="podium-place ${classes[idx]}">
        <span class="podium-medal">${medals[idx]}</span>
        <div class="podium-name">${getAvatar(s.player, 40)} ${s.player}</div>
        <div class="podium-points">${s.totalPoints}</div>
        <div class="podium-label">Points</div>
      </div>
    `).join('');

    // Reorder for visual podium effect (2nd, 1st, 3rd)
    if (top3.length >= 2) {
      const html = podium.innerHTML;
      // Already ordered by grid-column in CSS
    }
  }

  function renderStandingsTable() {
    const standings = calculateStandings();
    const thead = document.getElementById('standingsTableHead');
    const tbody = document.getElementById('standingsTableBody');

    if (standings.length === 0) {
      tbody.innerHTML = `
        <tr>
          <td colspan="20" style="padding:60px 20px;">
            <div class="empty-state">
              <div class="emoji">ğŸˆ</div>
              <h3>No Scores Yet</h3>
              <p>Once games are scored, the leaderboard will appear here.</p>
            </div>
          </td>
        </tr>`;
      thead.innerHTML = '';
      return;
    }

    // Build header with week columns
    const weekCols = weeks.map(w => `<th class="week-col">W${w}</th>`).join('');
    thead.innerHTML = `
      <tr>
        <th class="rank-col">#</th>
        <th>Player</th>
        ${weekCols}
        <th class="total-col">Total</th>
      </tr>`;

    // Build rows
    tbody.innerHTML = standings.map((s, idx) => {
      const rank = idx + 1;
      const rankClass = `rank-${rank}`;

      // Week cells
      const weekCells = weeks.map(w => {
        const score = s.weeklyScores[w] || 0;
        const allWeekScores = Object.values(s.weeklyScores);
        const maxScore = Math.max(...allWeekScores);
        const minScore = Math.min(...allWeekScores.filter(x => x > 0));
        
        let cellClass = 'week-cell';
        if (score > 0) cellClass += ' has-score';
        if (score === maxScore && maxScore > 0) cellClass += ' best-week';
        if (score === minScore && minScore > 0 && allWeekScores.length > 1) cellClass += ' worst-week';

        return `<td class="${cellClass}">${score > 0 ? score : 'â€”'}</td>`;
      }).join('');

      return `
        <tr>
          <td class="rank-cell ${rankClass}">${rank}</td>
          <td class="player-cell">${getAvatar(s.player, 28)} ${s.player}</td>
          ${weekCells}
          <td class="total-cell">${s.totalPoints}</td>
        </tr>`;
    }).join('');
  }

  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>

</body>
</html>
