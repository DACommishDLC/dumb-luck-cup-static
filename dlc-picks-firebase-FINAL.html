<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Dumb Luck Cup â€” Make Your Picks</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --green:   #00c48c;
      --red:     #ff4d4d;
      --yellow:  #f5c518;
      --dark:    #0d0f14;
      --card:    #171a22;
      --border:  #252836;
      --text:    #e8eaf0;
      --muted:   #6b7280;
      --nfl:     #3b82f6;
      --fbs:     #f97316;
    }

    * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--dark);
      color: var(--text);
      min-height: 100vh;
      padding-bottom: 120px;
    }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      background: linear-gradient(135deg, #f5c518 0%, #d4a017 100%);
      border-bottom: 1px solid var(--border);
      padding: 16px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: 'ğŸˆ';
      position: absolute;
      font-size: 150px;
      opacity: 0.1;
      top: -20px;
      right: -20px;
      transform: rotate(-15deg);
      pointer-events: none;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 26px;
      letter-spacing: 1px;
      color: #000;
      position: relative;
      z-index: 1;
    }

    .player-name {
      font-size: 13px;
      color: rgba(0,0,0,0.6);
      position: relative;
      z-index: 1;
    }

    .player-name span {
      color: #000;
      font-weight: 600;
    }

    /* Pick counter pill */
    .pick-counter {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .counter-pill {
      background: rgba(0,0,0,0.15);
      border-radius: 20px;
      padding: 6px 14px;
      font-size: 14px;
      font-weight: 700;
      transition: all 0.3s;
      color: #000;
      position: relative;
      z-index: 1;
    }

    .counter-pill.complete {
      background: rgba(0,0,0,0.2);
      color: #000;
    }

    .counter-pill.over {
      background: var(--red);
      color: #fff;
    }

    .submit-btn {
      background: #000;
      color: var(--yellow);
      border: none;
      border-radius: 20px;
      padding: 8px 20px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      opacity: 0.4;
      pointer-events: none;
    }

    .submit-btn.active {
      opacity: 1;
      pointer-events: all;
    }

    .submit-btn.active:hover {
      transform: scale(1.04);
      box-shadow: 0 4px 20px rgba(245,197,24,0.4);
    }

    /* â”€â”€ Filter bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .filter-bar {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding: 12px 20px;
      scrollbar-width: none;
      border-bottom: 1px solid var(--border);
      background: var(--card);
    }

    .filter-bar::-webkit-scrollbar { display: none; }

    .filter-btn {
      flex-shrink: 0;
      background: var(--border);
      border: 1px solid transparent;
      color: var(--muted);
      border-radius: 20px;
      padding: 6px 14px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .filter-btn.active {
      background: transparent;
      border-color: var(--yellow);
      color: var(--yellow);
    }

    .filter-btn.nfl-filter.active { border-color: var(--nfl); color: var(--nfl); }
    .filter-btn.fbs-filter.active { border-color: var(--fbs); color: var(--fbs); }

    /* â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .search-wrap {
      padding: 12px 20px;
      background: var(--dark);
    }

    .search-input {
      width: 100%;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 14px 10px 38px;
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      outline: none;
      transition: border-color 0.2s;
    }

    .search-input:focus { border-color: var(--yellow); }
    .search-input::placeholder { color: var(--muted); }

    .search-wrap {
      position: relative;
    }

    .search-icon {
      position: absolute;
      left: 34px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      font-size: 16px;
      pointer-events: none;
    }

    /* â”€â”€ Day group header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .day-group { margin-bottom: 4px; }

    .day-header {
      padding: 10px 20px 6px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--muted);
    }

    /* â”€â”€ Game card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .game-card {
      margin: 0 12px 8px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      transition: all 0.2s;
      cursor: pointer;
      user-select: none;
    }

    .game-card:active { transform: scale(0.98); }

    .game-card.picked {
      border-color: var(--green);
      background: #0d1f1a;
    }

    .game-card.locked {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .game-card.locked .game-inner { pointer-events: none; }

    .game-inner {
      padding: 14px 16px;
    }

    /* Top row: league badge + time + lock icon */
    .game-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .league-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .nfl-dot { background: var(--nfl); }
    .fbs-dot { background: var(--fbs); }

    .game-time {
      font-size: 12px;
      color: var(--muted);
      flex: 1;
    }

    .lock-badge {
      font-size: 11px;
      color: var(--red);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 3px;
    }

    /* Teams + spread row */
    .teams-row {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 8px;
    }

    .team {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .team.away { text-align: left; }
    .team.home { text-align: right; }

    .team-name {
      font-size: 15px;
      font-weight: 700;
      line-height: 1.2;
    }

    .team-abbr {
      font-size: 11px;
      color: var(--muted);
      font-weight: 500;
    }

    .vs-spread {
      text-align: center;
    }

    .vs-label {
      font-size: 10px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Pick buttons */
    .pick-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-top: 12px;
    }

    .pick-btn {
      background: var(--border);
      border: 1.5px solid transparent;
      border-radius: 10px;
      padding: 9px 8px;
      cursor: pointer;
      transition: all 0.15s;
      text-align: center;
    }

    .pick-btn:hover { border-color: var(--muted); }

    .pick-btn.selected-fav {
      background: #0d2010;
      border-color: var(--green);
    }

    .pick-btn.selected-dog {
      background: #0d2010;
      border-color: var(--green);
    }

    .pick-btn-team {
      font-size: 12px;
      font-weight: 700;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .pick-btn-spread {
      font-size: 13px;
      font-weight: 700;
      margin-top: 2px;
    }

    .fav-spread { color: var(--red); }
    .dog-spread { color: var(--green); }

    .pick-btn-label {
      font-size: 10px;
      color: var(--muted);
      margin-top: 1px;
    }

    /* Spread updated indicator */
    .spread-updated {
      font-size: 10px;
      color: var(--muted);
      text-align: center;
      margin-top: 8px;
      font-style: italic;
    }

    /* â”€â”€ My Picks tray (bottom) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .picks-tray {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--card);
      border-top: 1px solid var(--border);
      padding: 12px 20px 20px;
      z-index: 200;
    }

    .tray-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      margin-bottom: 0;
    }

    .tray-title {
      font-size: 13px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tray-count {
      background: var(--yellow);
      color: #000;
      border-radius: 10px;
      padding: 1px 7px;
      font-size: 12px;
    }

    .tray-chevron {
      color: var(--muted);
      font-size: 18px;
      transition: transform 0.2s;
    }

    .tray-chevron.open { transform: rotate(180deg); }

    .tray-content {
      display: none;
      margin-top: 12px;
    }

    .tray-content.open { display: block; }

    .tray-picks-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 6px;
    }

    .tray-pick {
      background: var(--border);
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 4px;
    }

    .tray-pick-team {
      font-weight: 700;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .tray-pick-spread {
      font-size: 11px;
      color: var(--muted);
      flex-shrink: 0;
    }

    .tray-remove {
      color: var(--muted);
      cursor: pointer;
      font-size: 16px;
      line-height: 1;
      flex-shrink: 0;
      padding: 0 2px;
    }

    .tray-remove:hover { color: var(--red); }

    /* â”€â”€ Empty state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }

    .empty-state .emoji { font-size: 40px; margin-bottom: 12px; }
    .empty-state p { font-size: 14px; }

    /* â”€â”€ Submission screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .submission-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: var(--dark);
      z-index: 999;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 40px;
    }

    .submission-overlay.active { display: flex; }

    .submission-overlay .emoji { font-size: 64px; margin-bottom: 24px; }

    .submission-overlay h2 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 42px;
      letter-spacing: 1px;
      color: var(--yellow);
      margin-bottom: 12px;
    }

    .submission-overlay p {
      color: var(--muted);
      font-size: 15px;
      max-width: 320px;
      line-height: 1.6;
      margin-bottom: 32px;
    }

    .submission-picks-list {
      width: 100%;
      max-width: 400px;
      margin-bottom: 28px;
    }

    .sub-pick-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 14px;
      background: var(--card);
      border-radius: 8px;
      margin-bottom: 6px;
      font-size: 13px;
    }

    .sub-pick-team { font-weight: 700; }
    .sub-pick-spread { color: var(--muted); }

    .back-btn {
      background: var(--border);
      color: var(--text);
      border: none;
      border-radius: 20px;
      padding: 12px 28px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (min-width: 600px) {
      .games-list {
        max-width: 600px;
        margin: 0 auto;
      }

      .game-card { margin: 0 0 10px; }
      .picks-tray { max-width: 600px; left: 50%; transform: translateX(-50%); }
    }
  
    /* â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    nav.page-nav {
      background: var(--card);
      border-bottom: 1px solid var(--border);
      padding: 12px 20px;
      display: flex;
      gap: 12px;
      overflow-x: auto;
      scrollbar-width: none;
    }

    nav.page-nav::-webkit-scrollbar { display: none; }

    .nav-btn {
      background: var(--border);
      border: none;
      color: #ffffff;
      border-radius: 20px;
      padding: 8px 18px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      text-decoration: none;
      transition: all 0.2s;
      display: inline-block;
    }

    .nav-btn:hover {
      background: var(--muted);
      color: var(--text);
    }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js">
  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js">
  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
  <script src="firebase-config.js">
  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
</head>
<body>

<!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header>
  <div class="header-top">
    <div class="logo">ğŸˆ Dumb Luck Cup</div>
    <div class="player-name">Playing as <span id="playerNameDisplay">â€”</span></div>
  </div>
  <div class="pick-counter">
    <div class="counter-pill" id="counterPill">0 / 10 picks</div>
    <button class="submit-btn" id="submitBtn" onclick="submitPicks()">Submit Picks</button>
  </div>
</header>
<nav class="page-nav">
  <a href="/" class="nav-btn">ğŸˆ Make Picks</a>
  <a href="/dlc-leaderboard-firebase-FINAL.html" class="nav-btn">ğŸ“Š Leaderboard</a>
  <a href="/dlc-honor-roll.html" class="nav-btn">ğŸ† Honor Roll</a>
  <a href="/dlc-rules.html" class="nav-btn">ğŸ“– Rules & FAQ</a>
  <a href="/dlc-admin-panel-firebase-FINAL.html" class="nav-btn">âš™ï¸ Admin</a>
</nav>


<!-- â”€â”€ Filter bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="filter-bar">
  <button class="filter-btn active" data-filter="all" onclick="setFilter(this, 'all')">All Games</button>
  <button class="filter-btn nfl-filter" data-filter="NFL" onclick="setFilter(this, 'NFL')">ğŸˆ NFL</button>
  <button class="filter-btn fbs-filter" data-filter="FBS" onclick="setFilter(this, 'FBS')">ğŸ“ FBS</button>
  <button class="filter-btn" data-filter="my-picks" onclick="setFilter(this, 'my-picks')">â­ My Picks</button>
  <button class="filter-btn" data-filter="unpicked" onclick="setFilter(this, 'unpicked')">â—¯ Unpicked</button>
</div>

<!-- â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="search-wrap">
  <span class="search-icon">ğŸ”</span>
  <input
    class="search-input"
    id="searchInput"
    type="text"
    placeholder="Search by team name or abbreviation..."
    oninput="onSearch()"
    autocomplete="off"
    autocorrect="off"
    spellcheck="false"
  >
  <button class="search-clear" id="searchClear" onclick="clearSearch()" title="Clear search">âœ•</button>
</div>
<div class="search-result-count" id="searchResultCount"></div>

<!-- â”€â”€ Game list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="games-list" id="gamesList"></div>

<!-- â”€â”€ My Picks tray â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="picks-tray">
  <div class="tray-toggle" onclick="toggleTray()">
    <div class="tray-title">
      My Picks
      <span class="tray-count" id="trayCount">0</span>
    </div>
    <div class="tray-chevron" id="trayChevron">â–²</div>
  </div>
  <div class="tray-content" id="trayContent">
    <div class="tray-picks-grid" id="trayPicksGrid"></div>
  </div>
</div>

<!-- â”€â”€ Submission overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="submission-overlay" id="submissionOverlay">
  <div class="emoji">ğŸˆ</div>
  <h2>Picks Locked In!</h2>
  <p>Your 10 picks are saved. You can change them any time before kickoff.</p>
  <div class="submission-picks-list" id="submissionPicksList"></div>
  <button class="back-btn" onclick="closeSubmission()">â† Back to Games</button>
</div>

<!-- â”€â”€ Player name modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="nameModal" style="
  display:flex; position:fixed; inset:0; background:rgba(0,0,0,0.85);
  z-index:999; align-items:center; justify-content:center; padding:20px;
">
  <div style="
    background:var(--card); border:1px solid var(--border);
    border-radius:18px; padding:32px 28px; width:100%; max-width:360px;
    text-align:center;
  ">
    <div style="font-size:48px; margin-bottom:16px;">ğŸˆ</div>
    <h2 style="font-family:'Bebas Neue',sans-serif; font-size:32px; color:var(--yellow); margin-bottom:8px;">
      Dumb Luck Cup
    </h2>
    <div style="display:flex; gap:8px; justify-content:center; margin-bottom:16px; flex-wrap:wrap;">
      <a href="/dlc-leaderboard-firebase-FINAL.html" style="font-size:13px; color:#e8eaf0; text-decoration:none; padding:8px 12px; background:rgba(102,126,234,0.2); border:1px solid rgba(102,126,234,0.4); border-radius:8px; font-weight:600;">ğŸ“Š Leaderboard</a>
      <a href="/dlc-honor-roll.html" style="font-size:13px; color:#e8eaf0; text-decoration:none; padding:8px 12px; background:rgba(102,126,234,0.2); border:1px solid rgba(102,126,234,0.4); border-radius:8px; font-weight:600;">ğŸ† Honor Roll</a>
      <a href="/dlc-rules.html" style="font-size:13px; color:#e8eaf0; text-decoration:none; padding:8px 12px; background:rgba(102,126,234,0.2); border:1px solid rgba(102,126,234,0.4); border-radius:8px; font-weight:600;">ğŸ“– Rules</a>
    </div>
    <p style="color:var(--muted); font-size:14px; margin-bottom:28px; line-height:1.5;">
      Week 8 Â· 2025 Season<br>Pick 10 games. Beat the spread. Be the goat.
    </p>
    <select id="playerSelect" style="
      width:100%; background:var(--border); border:1px solid var(--border);
      border-radius:10px; padding:12px 14px; color:var(--text);
      font-family:'DM Sans',sans-serif; font-size:15px; margin-bottom:16px;
      outline:none; cursor:pointer;
    ">
      <option value="">Select your name...</option>
      <option>Da Commish</option>
      <option>Q</option>
      <option>O</option>
      <option>Milo</option>
      <option>Owls</option>
      <option>Honey</option>
      <option>Pops</option>
      <option>ML</option>
      <option>Cobe</option>
      <option>Coin</option>
      <option>Abby</option>
      <option>Jason</option>
    </select>
    <button onclick="startPicking()" style="
      width:100%; background:var(--yellow); color:#000; border:none;
      border-radius:10px; padding:14px; font-family:'DM Sans',sans-serif;
      font-size:16px; font-weight:700; cursor:pointer;
    ">Let's Go â†’</button>
  </div>
</div>

<script>
  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let games = [];
  let picks = {};       // { gameId: { team, spread, side } }
  let currentFilter = 'all';
  let currentPlayer = '';
  let trayOpen = false;

  const MAX_PICKS = 10;

  // â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.addEventListener('DOMContentLoaded', async () => {
    loadGames();
  });

  async function loadGames() {
    // Load from Firebase first
    try {
      games = await DLC_DB.loadGames();
    } catch(e) {
      console.warn('Firebase load failed, trying localStorage');
    }
    
    // Fallback to localStorage
    if (games.length === 0) {
      const stored = localStorage.getItem('dlc_games');
      if (stored) {
        try { games = JSON.parse(stored); } catch(e) { games = []; }
      }
    }

    if (games.length === 0) {
      games = getFallbackGames();
    }

    // Load existing picks for this player
    if (currentPlayer) {
      try {
        picks = await DLC_DB.loadPlayerPicks(currentPlayer);
      } catch(e) {
        const savedPicks = localStorage.getItem(`dlc_picks_${currentPlayer}`);
        if (savedPicks) {
          try { picks = JSON.parse(savedPicks); } catch(e) { picks = {}; }
        }
      }
    }

    renderGames();
    updateCounter();
  }

  async function startPicking() {
    const sel = document.getElementById('playerSelect').value;
    if (!sel) { alert('Please select your name first!'); return; }
    currentPlayer = sel;
    document.getElementById('playerNameDisplay').innerHTML = getAvatar(sel, 24) + sel;

    // Load existing picks
    try {
      picks = await DLC_DB.loadPlayerPicks(sel);
    } catch(e) {
      const saved = localStorage.getItem(`dlc_picks_${sel}`);
      if (saved) {
        try { picks = JSON.parse(saved); } catch(e) { picks = {}; }
      }
    }

    document.getElementById('nameModal').style.display = 'none';
    renderGames();
    updateCounter();
  }

  // â”€â”€ Filtering & search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setFilter(btn, filter) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentFilter = filter;
    renderGames();
  }

  function getFilteredGames() {
    const search = document.getElementById('searchInput').value.toLowerCase().trim();

    return games.filter(g => {
      if (currentFilter === 'NFL' && g.league !== 'NFL') return false;
      if (currentFilter === 'FBS' && g.league !== 'FBS') return false;
      if (currentFilter === 'my-picks' && !picks[g.id]) return false;
      if (currentFilter === 'unpicked' && picks[g.id]) return false;
      if (search) {
        const searchable = [
          g.homeTeam, g.awayTeam,
          g.homeAbbr, g.awayAbbr,
          // also match last word (e.g. "Chiefs", "Eagles")
          g.homeTeam.split(' ').slice(-1)[0],
          g.awayTeam.split(' ').slice(-1)[0],
        ].map(s => s.toLowerCase());
        if (!searchable.some(s => s.includes(search))) return false;
      }
      return true;
    });
  }

  // â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderGames() {
    const list = document.getElementById('gamesList');
    const filtered = getFilteredGames();
    const search = document.getElementById('searchInput').value.trim();
    const countEl = document.getElementById('searchResultCount');

    // Update result count
    if (search) {
      countEl.textContent = filtered.length === 0
        ? 'No games found'
        : `${filtered.length} game${filtered.length !== 1 ? 's' : ''} found`;
    } else {
      countEl.textContent = '';
    }

    if (filtered.length === 0) {
      list.innerHTML = `
        <div class="empty-state">
          <div class="emoji">ğŸˆ</div>
          <p>${search ? 'No games found for "' + search + '"' : 'No games found'}</p>
        </div>`;
      return;
    }

    // Group by day
    const groups = {};
    filtered.forEach(g => {
      const day = getDayLabel(g.gameTime);
      if (!groups[day]) groups[day] = [];
      groups[day].push(g);
    });

    list.innerHTML = Object.entries(groups).map(([day, dayGames]) => `
      <div class="day-group">
        <div class="day-header">${day}</div>
        ${dayGames.map(g => renderGameCard(g)).join('')}
      </div>
    `).join('');
  }

  function renderGameCard(game) {
    const isLocked   = game.status === 'live' || game.status === 'final';
    const myPick     = picks[game.id];
    const isPicked   = !!myPick;

    // Determine favorite and underdog
    // currentSpread is relative to HOME team (negative = home favored)
    const homeFavored = game.currentSpread <= 0;
    const spreadValue = Math.abs(game.currentSpread);

    const favTeam  = homeFavored ? game.homeTeam : game.awayTeam;
    const dogTeam  = homeFavored ? game.awayTeam : game.homeTeam;
    const favAbbr  = homeFavored ? game.homeAbbr : game.awayAbbr;
    const dogAbbr  = homeFavored ? game.awayAbbr : game.homeAbbr;

    const pickedFav = myPick && myPick.side === 'favorite';
    const pickedDog = myPick && myPick.side === 'underdog';

    const updatedAgo = formatTimeSince(game.spreadLastUpdated);

    return `
      <div class="game-card ${isPicked ? 'picked' : ''} ${isLocked ? 'locked' : ''}"
           id="card-${game.id}">
        <div class="game-inner">

          <div class="game-meta">
            <div class="league-dot ${game.league === 'NFL' ? 'nfl-dot' : 'fbs-dot'}"></div>
            <div class="game-time">${game.league} Â· ${formatGameTime(game.gameTime)}</div>
            ${isLocked ? `<div class="lock-badge">ğŸ”’ Locked</div>` : ''}
            ${isPicked && !isLocked ? `<div style="font-size:11px;color:var(--green);font-weight:600;">âœ“ Picked</div>` : ''}
          </div>

          <div class="teams-row">
            <div class="team away">
              <div class="team-name">${game.awayTeam}</div>
              <div class="team-abbr">${game.awayAbbr} Â· Away</div>
            </div>
            <div class="vs-spread">
              <div class="vs-label">@</div>
            </div>
            <div class="team home">
              <div class="team-name">${game.homeTeam}</div>
              <div class="team-abbr">${game.homeAbbr} Â· Home</div>
            </div>
          </div>

          ${!isLocked ? `
          <div class="pick-row">
            <button
              class="pick-btn ${pickedFav ? 'selected-fav' : ''}"
              onclick="makePick('${game.id}', '${favTeam}', -${spreadValue}, 'favorite')"
            >
              <div class="pick-btn-spread fav-spread">-${spreadValue}</div>
              <div class="pick-btn-label">FAVORITE</div>
            </button>
            <button
              class="pick-btn ${pickedDog ? 'selected-dog' : ''}"
              onclick="makePick('${game.id}', '${dogTeam}', +${spreadValue}, 'underdog')"
            >
              <div class="pick-btn-spread dog-spread">+${spreadValue}</div>
              <div class="pick-btn-label">UNDERDOG</div>
            </button>
          </div>
          <div class="spread-updated">Spread updated ${updatedAgo}</div>
          ` : `
          <div style="margin-top:10px; padding:8px 12px; background:var(--border);
               border-radius:8px; font-size:12px; color:var(--muted); text-align:center;">
            ${myPick
              ? `Your pick: <strong style="color:var(--text)">${myPick.team}</strong>
                 <span style="color:${myPick.side==='favorite'?'var(--red)':'var(--green)'}">
                 ${myPick.side==='favorite'?'-':'+'}${spreadValue}</span>
                 Â· Locked at kickoff`
              : `Game locked â€” no pick submitted`
            }
          </div>
          `}

        </div>
      </div>`;
  }

  // â”€â”€ Pick logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function makePick(gameId, team, spread, side) {
    if (!currentPlayer) return;

    const pickCount = Object.keys(picks).length;
    const alreadyPicked = picks[gameId];

    // If clicking same pick again â†’ remove it (toggle)
    if (alreadyPicked && alreadyPicked.team === team) {
      delete picks[gameId];
      savePicks();
      updateCounter();
      renderGames();
      renderTray();
      return;
    }

    // If already have 10 picks and this is a NEW game â†’ block
    if (!alreadyPicked && pickCount >= MAX_PICKS) {
      showToast(`You've already picked ${MAX_PICKS} games. Remove one first.`);
      return;
    }

    // Save pick
    picks[gameId] = {
      team,
      spread,
      side,
      pickedAt: new Date().toISOString(),
      gameId
    };

    savePicks();
    updateCounter();
    renderGames();
    renderTray();

    // Auto open tray when first pick is made
    if (Object.keys(picks).length === 1) openTray();
  }

  async function savePicks() {
    if (!currentPlayer) return;
    try {
      await DLC_DB.savePlayerPicks(currentPlayer, picks);
    } catch(e) {
      console.warn('Firebase save failed, using localStorage');
      localStorage.setItem(`dlc_picks_${currentPlayer}`, JSON.stringify(picks));
    }
  }

  // â”€â”€ Counter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function updateCounter() {
    const count = Object.keys(picks).length;
    const pill  = document.getElementById('counterPill');
    const btn   = document.getElementById('submitBtn');
    const trayCount = document.getElementById('trayCount');

    pill.textContent = `${count} / ${MAX_PICKS} picks`;
    pill.className = 'counter-pill' + (count === MAX_PICKS ? ' complete' : count > MAX_PICKS ? ' over' : '');

    btn.className = 'submit-btn' + (count === MAX_PICKS ? ' active' : '');
    trayCount.textContent = count;
  }

  // â”€â”€ Tray â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function toggleTray() {
    trayOpen = !trayOpen;
    document.getElementById('trayContent').className = 'tray-content' + (trayOpen ? ' open' : '');
    document.getElementById('trayChevron').className = 'tray-chevron' + (trayOpen ? ' open' : '');
  }

  function openTray() {
    trayOpen = true;
    document.getElementById('trayContent').classList.add('open');
    document.getElementById('trayChevron').classList.add('open');
  }

  function renderTray() {
    const grid = document.getElementById('trayPicksGrid');
    const pickEntries = Object.entries(picks);

    if (pickEntries.length === 0) {
      grid.innerHTML = `<div style="color:var(--muted);font-size:13px;padding:8px 0;grid-column:1/-1;">
        No picks yet â€” select your 10 games above.
      </div>`;
      return;
    }

    grid.innerHTML = pickEntries.map(([gameId, pick]) => {
      const game = games.find(g => g.id === gameId);
      const spreadDisplay = pick.side === 'favorite'
        ? `-${Math.abs(pick.spread)}`
        : `+${Math.abs(pick.spread)}`;
      return `
        <div class="tray-pick">
          <div class="tray-pick-team">${pick.team}</div>
          <div class="tray-pick-spread">${spreadDisplay}</div>
          <div class="tray-remove" onclick="removePick('${gameId}')">Ã—</div>
        </div>`;
    }).join('');
  }

  function removePick(gameId) {
    delete picks[gameId];
    savePicks();
    updateCounter();
    renderGames();
    renderTray();
  }

  // â”€â”€ Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function submitPicks() {
    if (Object.keys(picks).length !== MAX_PICKS) return;

    const overlay = document.getElementById('submissionOverlay');
    const list    = document.getElementById('submissionPicksList');

    list.innerHTML = Object.entries(picks).map(([gameId, pick]) => {
      const spreadDisplay = pick.side === 'favorite'
        ? `-${Math.abs(pick.spread)}`
        : `+${Math.abs(pick.spread)}`;
      return `
        <div class="sub-pick-item">
          <div class="sub-pick-team">${pick.team}</div>
          <div class="sub-pick-spread">${spreadDisplay}</div>
        </div>`;
    }).join('');

    overlay.classList.add('active');

    // In production: POST picks to your database here
    console.log('Picks submitted:', { player: currentPlayer, picks });
  }

  function closeSubmission() {
    document.getElementById('submissionOverlay').classList.remove('active');
  }

  // â”€â”€ Toast notification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showToast(msg) {
    const existing = document.getElementById('toast');
    if (existing) existing.remove();

    const toast = document.createElement('div');
    toast.id = 'toast';
    toast.textContent = msg;
    Object.assign(toast.style, {
      position: 'fixed', bottom: '130px', left: '50%',
      transform: 'translateX(-50%)',
      background: '#333', color: '#fff', padding: '10px 20px',
      borderRadius: '20px', fontSize: '13px', fontWeight: '600',
      zIndex: '9999', whiteSpace: 'nowrap',
      boxShadow: '0 4px 20px rgba(0,0,0,0.4)'
    });
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }

  // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function formatGameTime(iso) {
    const d = new Date(iso);
    return d.toLocaleString('en-US', {
      weekday: 'short', month: 'short', day: 'numeric',
      hour: 'numeric', minute: '2-digit'
    });
  }

  function getDayLabel(iso) {
    const d = new Date(iso);
    const today = new Date();
    const diff  = Math.round((d - today) / 86400000);
    const name  = d.toLocaleDateString('en-US', { weekday: 'long' });
    const date  = d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
    if (diff === 0) return `Today Â· ${date}`;
    if (diff === 1) return `Tomorrow Â· ${date}`;
    return `${name} Â· ${date}`;
  }

  function formatTimeSince(iso) {
    const secs = Math.floor((Date.now() - new Date(iso)) / 1000);
    if (secs < 60)    return 'just now';
    if (secs < 3600)  return `${Math.floor(secs/60)}m ago`;
    if (secs < 86400) return `${Math.floor(secs/3600)}h ago`;
    return `${Math.floor(secs/86400)}d ago`;
  }

  function onSearch() {
    const val = document.getElementById('searchInput').value;
    const clearBtn = document.getElementById('searchClear');
    clearBtn.className = 'search-clear' + (val ? ' visible' : '');
    renderGames();
  }

  function clearSearch() {
    document.getElementById('searchInput').value = '';
    document.getElementById('searchClear').className = 'search-clear';
    document.getElementById('searchResultCount').textContent = '';
    document.getElementById('searchInput').focus();
    renderGames();
  }

  function getFallbackGames() {
    // Small set of sample games if nothing is in localStorage
    return [
      { id:'f1', week:8, season:2025, league:'NFL', homeTeam:'Kansas City Chiefs', homeAbbr:'KC',
        awayTeam:'Las Vegas Raiders', awayAbbr:'LV', gameTime:'2025-10-26T17:00:00Z',
        currentSpread:-9.5, spreadLastUpdated:new Date().toISOString(), finalSpread:null, status:'scheduled' },
      { id:'f2', week:8, season:2025, league:'NFL', homeTeam:'Buffalo Bills', homeAbbr:'BUF',
        awayTeam:'Miami Dolphins', awayAbbr:'MIA', gameTime:'2025-10-26T17:00:00Z',
        currentSpread:-6.5, spreadLastUpdated:new Date().toISOString(), finalSpread:null, status:'scheduled' },
      { id:'f3', week:8, season:2025, league:'NFL', homeTeam:'Philadelphia Eagles', homeAbbr:'PHI',
        awayTeam:'Dallas Cowboys', awayAbbr:'DAL', gameTime:'2025-10-26T17:00:00Z',
        currentSpread:-3.5, spreadLastUpdated:new Date().toISOString(), finalSpread:null, status:'scheduled' },
      { id:'f4', week:8, season:2025, league:'FBS', homeTeam:'Georgia Bulldogs', homeAbbr:'UGA',
        awayTeam:'Texas Longhorns', awayAbbr:'TEX', gameTime:'2025-10-25T19:30:00Z',
        currentSpread:-3.5, spreadLastUpdated:new Date().toISOString(), finalSpread:null, status:'scheduled' },
      { id:'f5', week:8, season:2025, league:'FBS', homeTeam:'Ohio State Buckeyes', homeAbbr:'OSU',
        awayTeam:'Penn State Nittany Lions', awayAbbr:'PSU', gameTime:'2025-10-25T19:30:00Z',
        currentSpread:-6, spreadLastUpdated:new Date().toISOString(), finalSpread:null, status:'scheduled' },
    ];
  }

  // â”€â”€ Player Avatars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const PLAYER_AVATARS = {
    'Da Commish': 'ğŸ‘‘', 'Q': 'ğŸ¥ƒ', 'O': 'ğŸ§', 'Milo': 'ğŸ¸',
    'Owls': 'ğŸ¦‰', 'Honey': 'ğŸ¯', 'Pops': 'ğŸ¤˜', 'ML': 'ğŸ»',
    'Cobe': 'âš¾', 'Coin': 'ğŸª™', 'Abby': 'â›¸ï¸', 'Jason': 'ğŸ‡ªğŸ‡º'
  };

  function getAvatar(name, size = 32) {
    const emoji = PLAYER_AVATARS[name] || 'ğŸˆ';
    return `<span style="display:inline-flex;align-items:center;justify-content:center;width:${size}px;height:${size}px;font-size:${size*0.65}px;background:rgba(245,197,24,0.1);border-radius:50%;border:2px solid rgba(245,197,24,0.3);margin-right:8px;">${emoji}</span>`;
  }

</script>
</body>
</html>
